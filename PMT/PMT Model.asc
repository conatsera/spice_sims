Version 4
SHEET 1 10712 916
WIRE 2576 -144 2528 -144
WIRE 2528 -128 2528 -144
WIRE 2576 -128 2576 -144
WIRE 2896 -112 2848 -112
WIRE 2848 -96 2848 -112
WIRE 2896 -96 2896 -112
WIRE 1328 -80 1280 -80
WIRE 1536 -80 1488 -80
WIRE 1872 -80 1824 -80
WIRE 2160 -80 2112 -80
WIRE 2368 -80 2320 -80
WIRE 1280 -64 1280 -80
WIRE 1328 -64 1328 -80
WIRE 1488 -64 1488 -80
WIRE 1536 -64 1536 -80
WIRE 1824 -64 1824 -80
WIRE 1872 -64 1872 -80
WIRE 2112 -64 2112 -80
WIRE 2160 -64 2160 -80
WIRE 2320 -64 2320 -80
WIRE 2368 -64 2368 -80
WIRE 3040 -64 2992 -64
WIRE 2992 -48 2992 -64
WIRE 3504 -16 3488 -16
WIRE 352 0 304 0
WIRE 640 0 592 0
WIRE 848 0 800 0
WIRE 1040 0 992 0
WIRE 304 16 304 0
WIRE 352 16 352 0
WIRE 592 16 592 0
WIRE 640 16 640 0
WIRE 800 16 800 0
WIRE 848 16 848 0
WIRE 992 16 992 0
WIRE 1040 16 1040 0
WIRE 1328 48 1328 16
WIRE 1536 48 1536 16
WIRE 1872 48 1872 16
WIRE 2160 48 2160 16
WIRE 2368 48 2368 16
WIRE 2576 48 2576 32
WIRE 2656 48 2576 48
WIRE 2768 48 2720 48
WIRE 2784 48 2768 48
WIRE 2576 64 2576 48
WIRE 3712 64 3616 64
WIRE -112 80 -128 80
WIRE -96 80 -112 80
WIRE 2896 80 2896 64
WIRE 2976 80 2896 80
WIRE 3040 80 3040 16
WIRE 3088 80 3040 80
WIRE 3232 80 3088 80
WIRE 3344 80 3312 80
WIRE 3488 80 3488 -16
WIRE 3568 80 3568 -16
WIRE -96 96 -96 80
WIRE 2896 96 2896 80
WIRE 3616 160 3616 64
WIRE 3648 160 3616 160
WIRE 3712 160 3712 64
WIRE 3776 160 3776 64
WIRE 112 176 -96 176
WIRE 160 176 112 176
WIRE 304 176 240 176
WIRE 352 176 352 96
WIRE 352 176 304 176
WIRE 432 176 352 176
WIRE 576 176 512 176
WIRE 640 176 640 96
WIRE 640 176 576 176
WIRE 704 176 640 176
WIRE 816 176 784 176
WIRE 848 176 848 96
WIRE 848 176 816 176
WIRE 992 176 928 176
WIRE 1040 176 1040 96
WIRE 1040 176 992 176
WIRE 1120 176 1040 176
WIRE 1264 176 1200 176
WIRE 1328 176 1328 128
WIRE 1328 176 1264 176
WIRE 1392 176 1328 176
WIRE 1504 176 1472 176
WIRE 1536 176 1536 128
WIRE 1536 176 1504 176
WIRE 1568 176 1536 176
WIRE 1680 176 1568 176
WIRE 1824 176 1760 176
WIRE 1872 176 1872 128
WIRE 1872 176 1824 176
WIRE 1952 176 1872 176
WIRE 2096 176 2032 176
WIRE 2160 176 2160 128
WIRE 2160 176 2096 176
WIRE 2224 176 2160 176
WIRE 2336 176 2304 176
WIRE 2352 176 2336 176
WIRE 2368 176 2368 128
WIRE 2368 176 2352 176
WIRE 2512 176 2448 176
WIRE 2576 176 2576 144
WIRE 2576 176 2512 176
WIRE 2608 176 2576 176
WIRE 2752 176 2688 176
WIRE 2880 176 2752 176
WIRE 2896 176 2880 176
WIRE 2912 176 2896 176
WIRE 3072 176 2912 176
WIRE 3568 176 3568 80
WIRE -96 192 -96 176
WIRE 3072 192 3072 176
WIRE 3616 192 3616 160
WIRE 3648 208 3648 160
WIRE 4208 208 4064 208
WIRE 4336 208 4208 208
WIRE 4448 208 4400 208
WIRE 4576 208 4448 208
WIRE 4800 208 4656 208
WIRE 4912 208 4800 208
WIRE 4928 208 4912 208
WIRE 3408 224 3392 224
WIRE 3488 224 3488 80
WIRE 3536 224 3488 224
WIRE 3392 240 3392 224
WIRE 3824 256 3760 256
WIRE 3904 256 3824 256
WIRE 3984 256 3968 256
WIRE 4064 256 4064 208
WIRE 4208 256 4208 208
WIRE 4304 256 4288 256
WIRE 1328 272 1328 176
WIRE 1872 272 1872 176
WIRE 1872 272 1392 272
WIRE 2352 272 2352 176
WIRE 2352 272 1936 272
WIRE 2880 272 2880 176
WIRE 2880 272 2416 272
WIRE 4304 272 4304 256
WIRE 3024 288 2976 288
WIRE 3072 288 3072 272
WIRE 3072 288 3024 288
WIRE 3344 288 3344 80
WIRE 3536 288 3344 288
WIRE 4544 288 4448 288
WIRE 4656 288 4544 288
WIRE 2976 304 2976 288
WIRE 4448 304 4448 288
WIRE 4544 304 4544 288
WIRE 4800 304 4800 208
WIRE 1568 320 1568 176
WIRE 2160 320 2160 176
WIRE 2160 320 1632 320
WIRE 2576 320 2576 176
WIRE 2576 320 2224 320
WIRE 2688 320 2576 320
WIRE 2912 320 2912 176
WIRE 2912 320 2752 320
WIRE 3984 352 3984 336
WIRE 4208 352 4208 336
WIRE 2976 384 2976 368
WIRE 3072 384 3072 368
WIRE 3504 384 3424 384
WIRE 3616 384 3616 320
WIRE 3616 384 3504 384
WIRE 4064 384 4064 336
WIRE 4288 384 4288 336
WIRE 4288 384 4064 384
WIRE 4336 384 4288 384
WIRE 4448 384 4400 384
WIRE 4544 384 4544 368
WIRE 3424 400 3424 384
WIRE 3504 400 3504 384
WIRE 3648 400 3648 384
WIRE 4448 448 4448 384
WIRE 4576 448 4448 448
WIRE 4800 448 4800 368
WIRE 4800 448 4656 448
WIRE 4912 448 4800 448
WIRE 4928 448 4912 448
WIRE 3424 480 3424 464
WIRE 3504 480 3504 464
WIRE 3616 480 3616 384
WIRE 3648 480 3648 464
WIRE 3648 480 3616 480
WIRE 3744 480 3648 480
WIRE 3776 480 3776 160
WIRE 3776 480 3744 480
FLAG 3072 384 0
FLAG 2976 384 0
FLAG 304 16 0
FLAG 3024 288 VB
FLAG 112 176 1
FLAG 304 176 2
FLAG 592 16 0
FLAG 576 176 3
FLAG 800 16 0
FLAG 816 176 4
FLAG 992 16 0
FLAG 992 176 5
FLAG 1280 -64 0
FLAG 1264 176 6
FLAG 1488 -64 0
FLAG 1504 176 7
FLAG 1824 -64 0
FLAG 1824 176 8
FLAG 2112 -64 0
FLAG 2096 176 9
FLAG 2320 -64 0
FLAG 2336 176 10
FLAG 2512 176 11
FLAG 2528 -128 0
FLAG 2752 176 12
FLAG 2784 128 0
FLAG 2768 48 D10
FLAG 2848 -96 0
FLAG 2992 -48 0
FLAG 3088 80 Anode
FLAG 3776 0 0
FLAG 3904 0 0
FLAG 3904 -80 V-
FLAG 3776 -80 V+
FLAG 3824 256 VOUT
FLAG -112 80 VB
FLAG -96 192 0
FLAG 3616 160 V+
FLAG 3424 480 0
FLAG 3504 480 0
FLAG 3744 480 V-
FLAG 3392 240 0
FLAG 3984 352 0
FLAG 4208 352 0
FLAG 4304 272 0
FLAG 4544 384 0
FLAG 4656 368 0
FLAG 4912 208 VIN+
FLAG 4928 272 0
FLAG 4912 448 VIN-
FLAG 4928 512 0
SYMBOL res 256 160 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value {R1}
SYMBOL current -96 96 R0
WINDOW 3 -608 81 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR Value PULSE(0 2.7n 1u {PMTRise} 230n 1n {1/{Rate}})
SYMATTR InstName I1
SYMBOL cap 2960 304 R0
SYMATTR InstName C1
SYMATTR Value 4.7n
SYMBOL bi 352 16 R0
WINDOW 3 -75 253 Left 2
SYMATTR Value I=(I(I1)*(k*pow(abs(V(2,3)),a)-1)*(k*pow(abs(V(1,2)),a)))/(k*pow(abs(V(1,2)),a)-1)
SYMATTR InstName B1
SYMBOL bi 640 16 R0
WINDOW 3 -364 281 Left 2
SYMATTR Value I=(I(B1)*(k*pow(abs(V(3,4)),a)-1)*(k*pow(abs(V(2,3)),a)))/(k*pow(abs(V(2,3)),a)-1)
SYMATTR InstName B2
SYMBOL res 528 160 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value {R2}
SYMBOL bi 848 16 R0
WINDOW 3 -573 307 Left 2
SYMATTR Value I=(I(B2)*(k*pow(abs(V(4,5)),a)-1)*(k*pow(abs(V(3,4)),a)))/(k*pow(abs(V(3,4)),a)-1)
SYMATTR InstName B3
SYMBOL res 800 160 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value {R3}
SYMBOL res 944 160 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value {R4}
SYMBOL bi 1040 16 R0
WINDOW 3 -762 333 Left 2
SYMATTR Value I=(I(B3)*(k*pow(abs(V(5,6)),a)-1)*(k*pow(abs(V(4,5)),a)))/(k*pow(abs(V(4,5)),a)-1)
SYMATTR InstName B4
SYMBOL bi 1328 -64 R0
WINDOW 3 -1051 437 Left 2
SYMATTR Value I=(I(B4)*(k*pow(abs(V(6,7)),a)-1)*(k*pow(abs(V(5,6)),a)))/(k*pow(abs(V(5,6)),a)-1)
SYMATTR InstName B5
SYMBOL res 1216 160 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value {R5}
SYMBOL bi 1536 -64 R0
WINDOW 3 -1259 460 Left 2
SYMATTR Value I=(I(B5)*(k*pow(abs(V(7,8)),a)-1)*(k*pow(abs(V(6,7)),a)))/(k*pow(abs(V(6,7)),a)-1)
SYMATTR InstName B6
SYMBOL res 1488 160 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value {R6}
SYMBOL res 1776 160 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value {R7}
SYMBOL bi 1872 -64 R0
WINDOW 3 -1595 485 Left 2
SYMATTR Value I=(I(B6)*(k*pow(abs(V(8,9)),a)-1)*(k*pow(abs(V(7,8)),a)))/(k*pow(abs(V(7,8)),a)-1)
SYMATTR InstName B7
SYMBOL bi 2160 -64 R0
WINDOW 3 -1883 510 Left 2
SYMATTR Value I=(I(B7)*(k*pow(abs(V(9,10)),a)-1)*(k*pow(abs(V(8,9)),a)))/(k*pow(abs(V(8,9)),a)-1)
SYMATTR InstName B8
SYMBOL res 2048 160 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value {R8}
SYMBOL bi 2368 -64 R0
WINDOW 3 -2091 534 Left 2
SYMATTR Value I=(I(B8)*(k*pow(abs(V(10,11)),a)-1)*(k*pow(abs(V(9,10)),a)))/(k*pow(abs(V(9,10)),a)-1)
SYMATTR InstName B9
SYMBOL res 2320 160 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R9
SYMATTR Value {R9}
SYMBOL res 2464 160 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value {R10}
SYMBOL bi 2576 -128 R0
WINDOW 3 -2299 624 Left 2
SYMATTR Value I=(I(B9)*(k*pow(abs(V(11,12)),a)-1)*(k*pow(abs(V(10,11)),a)))/(k*pow(abs(V(10,11)),a)-1)
SYMATTR InstName B10
SYMBOL res 2704 160 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R11
SYMATTR Value {R11}
SYMBOL cap 2720 32 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C3
SYMATTR Value 4.7n
SYMBOL res 2768 32 R0
SYMATTR InstName R14
SYMATTR Value 50
SYMBOL bi 2896 -96 R0
WINDOW 3 -131 -61 Left 2
SYMATTR Value I=(I(I1)*pow(k,N)*pow(V(VB)*epsilon,N*a))
SYMATTR InstName B11
SYMBOL res 2880 80 R0
SYMATTR InstName R13
SYMATTR Value 10k
SYMBOL res 2880 -32 R0
SYMATTR InstName R15
SYMATTR Value 50
SYMBOL cap 3040 64 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C2
SYMATTR Value 4.7n
SYMBOL res 3024 -80 R0
SYMATTR InstName R16
SYMATTR Value 50
SYMBOL voltage 3904 -96 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value -3.3
SYMBOL voltage 3776 -96 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value 3.3
SYMBOL res 2560 -64 R0
SYMATTR InstName R20
SYMATTR Value 50
SYMBOL res 2560 48 R0
SYMATTR InstName R21
SYMATTR Value 10k
SYMBOL cap 2752 304 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C4
SYMATTR Value 20n
SYMBOL cap 2416 256 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C5
SYMATTR Value 20n
SYMBOL cap 1936 256 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C6
SYMATTR Value 20n
SYMBOL cap 2224 304 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C7
SYMATTR Value 20n
SYMBOL cap 1392 256 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C8
SYMATTR Value 20n
SYMBOL cap 1632 304 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C9
SYMATTR Value 20n
SYMBOL res 2352 32 R0
SYMATTR InstName R22
SYMATTR Value 50
SYMBOL res 2144 32 R0
SYMATTR InstName R23
SYMATTR Value 50
SYMBOL res 1856 32 R0
SYMATTR InstName R24
SYMATTR Value 50
SYMBOL res 1520 32 R0
SYMATTR InstName R25
SYMATTR Value 50
SYMBOL res 1312 32 R0
SYMATTR InstName R26
SYMATTR Value 50
SYMBOL res 3056 176 R0
SYMATTR InstName R27
SYMATTR Value 1
SYMBOL bi2 3072 288 R0
SYMATTR InstName B12
SYMATTR Value I=(850-V(11))/R11
SYMBOL res 3328 64 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R12
SYMATTR Value 20
SYMBOL OpAmps\\AD8099 3616 256 R0
SYMATTR InstName U1
SYMBOL res 3584 64 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R18
SYMATTR Value 499
SYMBOL cap 3776 48 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C13
SYMATTR Value 10µ
SYMBOL cap 3776 144 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C15
SYMATTR Value 0.1µ
SYMBOL cap 3488 400 R0
SYMATTR InstName C16
SYMATTR Value 0.1µ
SYMBOL cap 3408 400 R0
SYMATTR InstName C17
SYMATTR Value 10µ
SYMBOL res 3504 208 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R17
SYMATTR Value 124
SYMBOL cap 3568 -32 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C12
SYMATTR Value 0.5p
SYMBOL cap 3632 400 R0
SYMATTR InstName C14
SYMATTR Value 1p
SYMBOL res 3632 288 R0
SYMATTR InstName R19
SYMATTR Value 50
SYMBOL ind2 3968 240 M90
WINDOW 0 5 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName L1
SYMATTR Value 119.3nH
SYMATTR Type ind
SYMATTR SpiceLine Ipk=0.6 Rser=0.7
SYMBOL ind2 3968 352 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L2
SYMATTR Value 119.3nH
SYMATTR Type ind
SYMATTR SpiceLine Ipk=0.6 Rser=0.7
SYMBOL ind2 4304 240 R90
WINDOW 0 5 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName L3
SYMATTR Value 119.3nH
SYMATTR Type ind
SYMATTR SpiceLine Ipk=0.6 Rser=0.7
SYMBOL ind2 4304 352 M270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L4
SYMATTR Value 119.3nH
SYMATTR Type ind
SYMATTR SpiceLine Ipk=0.6 Rser=0.7
SYMBOL cap 3968 240 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C10
SYMATTR Value .47µ
SYMBOL cap 4400 192 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C11
SYMATTR Value 0.1µ
SYMBOL cap 4400 368 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C18
SYMATTR Value 0.1µ
SYMBOL res 4432 288 R0
SYMATTR InstName R28
SYMATTR Value 25
SYMBOL res 4432 192 R0
SYMATTR InstName R29
SYMATTR Value 25
SYMBOL cap 4528 304 R0
SYMATTR InstName C19
SYMATTR Value 0.1µ
SYMBOL voltage 4656 272 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 0.9
SYMBOL res 4672 432 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R30
SYMATTR Value 33
SYMBOL res 4672 192 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R31
SYMATTR Value 33
SYMBOL cap 4784 304 R0
SYMATTR InstName C20
SYMATTR Value 22p
SYMBOL cap 4912 208 R0
SYMATTR InstName C21
SYMATTR Value 6p
SYMBOL cap 4912 448 R0
SYMATTR InstName C22
SYMATTR Value 6p
TEXT -720 -176 Left 2 !.tran 50u
TEXT -1048 -296 Left 2 !.param PMTRise=4n Rate=25000 N=10 G1=65k G2=250k VB1=850 VB2=1000 R1=667k R2=333k R3=333k R4=333k R5=333k R6=333k R7=333k R8=667k R9=1Meg R10=1.333Meg R11=1Meg Rtotal=R1+R2+R3+R4+R5+R6+R7+R8+R9+R10+R11 e1=R1/Rtotal e2=R2/Rtotal e3=R3/Rtotal e4=R4/Rtotal e5=R5/Rtotal e6=R6/Rtotal e7=R7/Rtotal e8=R8/Rtotal e9=R9/Rtotal e10=R10/Rtotal e11=R11/Rtotal epsilonD1Product=e1*e2*e3*e4*e5*e6*e7*e8*e9*e10 epsilonD2Product=e1*e2*e3*e4*e5*e6*e7*e8*e9 epsilonD3Product=e1*e2*e3*e4*e5*e6*e7*e8 epsilonD4Product=e1*e2*e3*e4*e5*e6*e7 epsilonD5Product=e1*e2*e3*e4*e5*e6 epsilonD6Product=e1*e2*e3*e4*e5 epsilonD7Product=e1*e2*e3*e4 epsilonD8Product=e1*e2*e3 epsilonD9Product=e1*e2 epsilonD10Product=e1 epsilon=0.060896811 epsilon2=pow(10,(1/N)*log10(e1*e2*e3*e4*e5*e6*e7*e8*e9*e10*e11)) a=log(G1/G2)/(N*log(VB1/VB2)) k=pow(10,(1/N)*log10(G2/pow(VB2*epsilon,N*a)))
TEXT 3992 176 Left 2 !K1 L1 L2 1
TEXT 4184 176 Left 2 !K2 L3 L4 1
